!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SaiStyleColorPicker=e():t.SaiStyleColorPicker=e()}(window,function(){return function(t){var e={};function r(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);r(1);var o=function(){return(o=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=function(){function t(t,e){void 0===e&&(e={}),this.subscriptions={},this.defaultConfig={size:207,thickness:21,startAngle:330,backgroundColor:"#fff",borderColor:"#acacac",initColor:"#fff",inlineStyle:!0,matteBorderWidth:2,realBorderWidth:1,realBorderOffset:1,innerBorderGapRadian:Math.PI/180},this.wheelPanelOptions={},this.colorControl=new n(0,0,1),this.centerPoint={x:0,y:0},this.posControl={innerRadius:0,outerRadius:0,middleRadius:0,squareSize:0},this.eventControl={mousemove:!1},this.wheelPanelOptions=o({},this.defaultConfig,e),this.el=t,this.init()}return t.prototype.getColor=function(t){var e;switch(t){case"object:rgb":return{r:this.colorControl.red,g:this.colorControl.green,b:this.colorControl.blue};case"object:hsv":return{h:this.colorControl.hue,s:this.colorControl.saturation,v:this.colorControl.value};case"hsl":var r,o=this.colorControl,i=o.hue,s=o.saturation,a=o.value;return i=(e=n.hsv2hsl(i,s,a))[0],s=e[1],r=e[2],"hsl("+Math.round(i)+", "+ +(100*s).toFixed(1)+"%, "+ +(100*r).toFixed(1)+"%)";case"rgb":return this.colorControl.toColorString();case"hex":default:var l=this.colorControl,h=l.red,u=l.green,c=l.blue;return n.rgb2hex(h,u,c)}},t.prototype.setColor=function(t){var e,r,o,i,s,a,l,h,u,c,d,p;if("#"===(t=t.trim()).charAt(0)){var f=n.hex2rgb(t),g=f[0],v=f[1],C=f[2];u=(e=n.rgb2hsl(g,v,C))[0],c=e[1],p=e[2],u=(r=n.hsl2hsv(u,c,p))[0],c=r[1],d=r[2]}else if(t.includes("rgb")){g=void 0,v=void 0,C=void 0;(b=/rgb\((.+)\)/.exec(t)[1]).includes("%")?(g=(o=b.replace(/%/g,"").split(",").map(function(t){return+t/100*255}))[0],v=o[1],C=o[2],u=(i=n.rgb2hsl(g,v,C))[0],c=i[1],p=i[2]):(g=(s=b.split(",").map(function(t){return+t}))[0],v=s[1],C=s[2],u=(a=n.rgb2hsl(g,v,C))[0],c=a[1],p=a[2])}else{if(!t.includes("hsl"))throw new Error("Not a valid color string.");var b;u=(l=(b=/hsl\((.+)\)/.exec(t)[1]).split(",").map(function(t){return t.includes("%")?+t.replace("%","")/100:+t}))[0],c=l[1],p=l[2]}u=(h=n.hsl2hsv(u,c,p))[0],c=h[1],d=h[2],this.colorControl.hue=u,this.colorControl.saturation=c,this.colorControl.value=d,this.colorControl.refreshByHSV(),this.refreshColorDisplay()},t.prototype.on=function(t,e){this.subscriptions[t]=this.subscriptions[t]||[],this.subscriptions[t].push(e)},t.prototype.off=function(t,e){var r=this.subscriptions[t],o=r.indexOf(e);o>-1&&r.splice(o,1)},t.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var o=this.subscriptions[t];if(o)for(var i=0;i<o.length;i++){o[i].apply(this,e)}},t.prototype.init=function(){this.genElements(),this.setColor(this.wheelPanelOptions.initColor),this.bindEvents()},t.prototype.genElements=function(){var t=document.createDocumentFragment(),e=this.createFrameCanvas(),r={width:this.wheelPanelOptions.size+"px",height:this.wheelPanelOptions.size+"px",padding:(this.wheelPanelOptions.size-this.posControl.squareSize)/2+"px",background:this.wheelPanelOptions.backgroundColor+" url("+e.toDataURL()+") center center no-repeat"},o=document.createElement("div");o.className="sai-color-picker";var i=document.createElement("div");i.className="sai-picking-area";var n=document.createElement("div");n.className="sai-hue-picker";var s=document.createElement("div");if(s.className="sai-picking-area-container",this.setStyleCombined(s,r),this.wheelPanelOptions.inlineStyle){var a={position:"absolute",width:"10px",height:"10px",margin:"-5px 0 0 -5px",borderWidth:"2px",borderStyle:"solid",borderRadius:"50%",boxSizing:"border-box"};this.setupPickingAreaGradient(i),this.setStyleCombined(o,a),this.setStyleCombined(n,a),this.setStyleCombined(i,{position:"relative",height:"100%"}),this.setStyleCombined(s,{position:"relative",boxSizing:"border-box"})}i.appendChild(o),s.appendChild(i),s.appendChild(n),t.appendChild(s),this.el.appendChild(t),this.pickingAreaContainer=s,this.pickingArea=i,this.colorPicker=o,this.huePicker=n},t.prototype.setStyleCombined=function(t,e){var r=t.style;Object.keys(e).forEach(function(t){var o=e[t];r[t]=o})},t.prototype.setupPickingAreaGradient=function(t){t.style.backgroundImage="linear-gradient(to top, #000 0%, rgba(#000, 0) 100%), linear-gradient(to right, #fff 0%, rgba(#fff, 0) 100%)",t.style.backgroundImage="-webkit-gradient(linear, left bottom, left top, from(#000), to(rgba(0, 0, 0, 0))), -webkit-gradient(linear, left top, right top, from(#fff), to(rgba(255, 255, 255, 0)))"},t.prototype.bindEvents=function(){var t=this;this.pickingAreaContainer.addEventListener("mousedown",function(e){var r=e.clientX+window.pageXOffset,o=e.clientY+window.pageYOffset;t.triggerDown(r,o),e.preventDefault()})},t.prototype.triggerDown=function(t,e){var r=this.pickingAreaContainer.getBoundingClientRect();this.centerPoint.x=(r.left+r.right)/2+window.pageXOffset,this.centerPoint.y=(r.top+r.bottom)/2+window.pageYOffset;var o=t-this.centerPoint.x,i=e-this.centerPoint.y,n=Math.sqrt(o*o+i*i),s=t-(this.centerPoint.x-this.posControl.squareSize/2),a=e-(this.centerPoint.y-this.posControl.squareSize/2);n<=this.posControl.outerRadius&&n>=this.posControl.innerRadius?(this.triggerMoveForHue(t,e),this.startWatchMove("hue")):s>=0&&s<=this.posControl.squareSize&&a>=0&&a<=this.posControl.squareSize&&(this.triggerMoveForColor(t,e),this.startWatchMove("color"))},t.prototype.startWatchMove=function(t){var e=function(t){return function(e){var r=e.clientX+window.pageXOffset,o=e.clientY+window.pageYOffset;t(r,o)}},r=this.eventControl,o=e("hue"===t?this.triggerMoveForHue.bind(this):this.triggerMoveForColor.bind(this));r.mousemove||(r.mousemove=!0,document.addEventListener("mousemove",o),document.addEventListener("mouseup",function t(){document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",o),r.mousemove=!1}))},t.prototype.validateWithEdge=function(t,e,r){return t>r?r:t<0?e:t},t.prototype.triggerMoveForColor=function(t,e){var r=this.centerPoint.x-this.posControl.squareSize/2,o=this.centerPoint.y-this.posControl.squareSize/2,i=this.validateWithEdge(t-r,0,this.posControl.squareSize),s=this.validateWithEdge(e-o,0,this.posControl.squareSize),a=i/this.posControl.squareSize,l=s/this.posControl.squareSize,h=this.colorControl.hue,u=new n(h,a,1-l);this.colorControl=u,this.refreshColorDisplay()},t.prototype.triggerMoveForHue=function(t,e){var r=t-this.centerPoint.x,o=e-this.centerPoint.y,i=(a(Math.atan2(o,r))+this.wheelPanelOptions.startAngle)%360;this.colorControl.hue=i,this.colorControl.refreshByHSV(),this.refreshColorDisplay()},t.prototype.refreshColorDisplay=function(){var t=new n(this.colorControl.hue,1,1),e=(this.colorControl.hue+180)%360,r=(this.colorControl.hue+180-this.wheelPanelOptions.startAngle)%360/180*Math.PI,o=this.posControl.middleRadius*Math.cos(r)+this.wheelPanelOptions.size/2,i=this.posControl.middleRadius*Math.sin(r)+this.wheelPanelOptions.size/2,s=new n(e,1,1),a=this.colorControl.saturation*this.posControl.squareSize,l=(1-this.colorControl.value)*this.posControl.squareSize,h=this.colorControl.value,u=1-this.colorControl.value*(1-this.colorControl.saturation),c=new n(e,h,u);this.pickingArea.style.backgroundColor=t.toColorString(),this.huePicker.style.borderColor=s.toColorString(),this.huePicker.style.left=o+"px",this.huePicker.style.top=i+"px",this.colorPicker.style.borderColor=c.toColorString(),this.colorPicker.style.left=a+"px",this.colorPicker.style.top=l+"px",this.emit("update",this.getColor())},t.prototype.createFrameCanvas=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=this.wheelPanelOptions.size,t.height=this.wheelPanelOptions.size,this.drawHueWheel(e),t},t.prototype.drawHueWheel=function(t){var e=this.wheelPanelOptions,r=t.createImageData(e.size,e.size),o=r.data,i=e.size/2-e.realBorderOffset-e.realBorderWidth,l=i-e.thickness,h=i,u=e.size/2,c=e.size/2,d=e.size;this.posControl.innerRadius=l,this.posControl.outerRadius=h,this.posControl.middleRadius=(l+h)/2,this.posControl.squareSize=2*((l-e.realBorderOffset)/Math.sqrt(2)-e.realBorderOffset);for(var p=-i;p<i;p++)for(var f=-i;f<i;f++){var g=s(p,f),v=g[0],C=g[1];if(v<=h&&v>=l){var b=a(C),m=4*(p+e.size/2+(f+e.size/2)*d),y=(b+e.startAngle)%360,P=n.hsv2rgb(y,1,1),w=P[0],S=P[1],M=P[2];o[m]=w,o[m+1]=S,o[m+2]=M,o[m+3]=255}}t.putImageData(r,0,0),t.lineWidth=e.matteBorderWidth,t.strokeStyle=e.backgroundColor,t.beginPath(),t.arc(u,c,h,0,2*Math.PI),t.stroke(),t.beginPath(),t.arc(u,c,l,0,2*Math.PI),t.stroke(),t.lineWidth=e.realBorderWidth,t.strokeStyle=e.borderColor,t.beginPath(),t.arc(u,c,h+e.realBorderOffset,0,2*Math.PI),t.stroke();for(var x=[[-Math.PI/4+e.innerBorderGapRadian,Math.PI/4-e.innerBorderGapRadian],[Math.PI/4+e.innerBorderGapRadian,3*Math.PI/4-e.innerBorderGapRadian],[3*Math.PI/4+e.innerBorderGapRadian,5*Math.PI/4-e.innerBorderGapRadian],[5*Math.PI/4+e.innerBorderGapRadian,7*Math.PI/4-e.innerBorderGapRadian]],k=0;k<x.length;k++)t.beginPath(),t.arc(u,c,l-e.realBorderOffset,x[k][0],x[k][1]),t.closePath(),t.stroke()},t}(),n=function(){function t(t,e,r){this.hue=t,this.saturation=e,this.value=r,this.refreshByHSV()}return t.prototype.toColorString=function(){return"rgb("+this.red+", "+this.green+", "+this.blue+")"},t.prototype.refreshByHSV=function(){var e=t.hsv2rgb(this.hue,this.saturation,this.value),r=e[0],o=e[1],i=e[2];this.red=Math.round(r),this.green=Math.round(o),this.blue=Math.round(i)},t.hsv2rgb=function(t,e,r){var o,i,n,s,a,l,h,u,c,d=r*e,p=t/60,f=d*(1-Math.abs(p%2-1));p>=0&&p<=1?(h=(o=[d,f,0])[0],u=o[1],c=o[2]):p>=1&&p<=2?(h=(i=[f,d,0])[0],u=i[1],c=i[2]):p>=2&&p<=3?(h=(n=[0,d,f])[0],u=n[1],c=n[2]):p>=3&&p<=4?(h=(s=[0,f,d])[0],u=s[1],c=s[2]):p>=4&&p<=5?(h=(a=[f,0,d])[0],u=a[1],c=a[2]):p>=5&&p<=6&&(h=(l=[d,0,f])[0],u=l[1],c=l[2]);var g=r-d,v=[h+g,u+g,c+g];return[255*v[0],255*v[1],255*v[2]]},t.rgb2hsl=function(t,e,r){t/=255,e/=255,r/=255;var o,i=Math.min(t,e,r),n=Math.max(t,e,r),s=n-i,a=0;return a=0==s?0:n==t?(e-r)/s%6:n==e?(r-t)/s+2:(t-e)/s+4,(a=Math.round(60*a))<0&&(a+=360),o=(n+i)/2,[a,0==s?0:s/(1-Math.abs(2*o-1)),o]},t.hsl2hsv=function(t,e,r){var o=e*Math.min(r,1-r)+r;return[t,o?2-2*r/o:0,o]},t.hsv2hsl=function(t,e,r){var o=r-r*e/2,i=Math.min(o,1-o);return[t,i?(r-o)/i:0,o]},t.hex2rgb=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,r,o){return e+e+r+r+o+o});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),r=[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)];return[r[0],r[1],r[2]]},t.rgb2hex=function(t,e,r){return t=t.toString(16),e=e.toString(16),r=r.toString(16),1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==r.length&&(r="0"+r),"#"+t+e+r},t}();function s(t,e){return[Math.sqrt(t*t+e*e),Math.atan2(e,t)]}function a(t){return(t+Math.PI)/(2*Math.PI)*360}e.default=i},function(t,e,r){}]).default});